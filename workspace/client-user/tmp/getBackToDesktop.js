var breakout=function(){function z(){D(r,0,i,0,j);y=1;for(var a=0;a<o.length;a++){r.fillStyle=k[a];for(var b=0;b<o[a].length;b++){if(o[a][b]==1){r.fillRect(b*(c+e),a*(d+e),c,d);y=0}}}if(y)C();r.fillStyle="#f6290c";r.fillRect(p,q,f,g);if(s+u*n>i)u=-1;else if(s+u*n<0)u=1;if(t+v*n>j)B();else{if(t+v*n<0)v=1;else{if(t+v*n>j-g&&s+u*n>=p&&s+u*n<=p+f){v=-1;u=2*(s-(p+f/2))/f}}}if(t<=x){var h=Math.floor(t/(d+e));var w=Math.floor(s/(c+e));if(o[h][w]==1){o[h][w]=0;v=1}}s+=u*n;t+=v*n;r.fillStyle=l;r.beginPath();r.arc(s,t,m,0,Math.PI*2,true);r.closePath();r.fill()}function A(a){if(a.keyCode==39){if(p+h+f<=i)p+=h}else if(a.keyCode==37){if(p-h>=0)p-=h}}function B(){clearInterval(w);alert("Perdu !")}function C(){clearInterval(w);alert("Bravo vous avez gagn√© !")}function D(a,b,c,d,e){a.clearRect(b,d,c,e)}function E(a,b,c,d,e,f){o=new Array(b);for(var g=0;g<b;g++){o[g]=new Array(c);a.fillStyle=k[g];for(var h=0;h<c;h++){a.fillRect(h*(d+f),g*(e+f),d,e);o[g][h]=1}}return 1}var a=5;var b=8;var c=48;var d=15;var e=2;var f=80;var g=10;var h=8;var i=400;var j=300;var k=["#503A22","#88502F","#A17048","#D9C38A","#F7DDAC"];var l="#febf04";var m=8;var n=4;var o;var p;var q;var r;var s=100;var t=250;var u=1;var v=-1;var w;var x=(e+d)*a;var y=0;return{getBackToDesktop:function(){var h=Ext.get("x-desktop");h.update('<canvas id="canvasElem" width="'+h.getWidth()+'" height="'+h.getHeight()+'"></canvas>');elem=Ext.get("canvasElem").dom;if(!elem||!elem.getContext){return}r=elem.getContext("2d");if(!r){return}i=elem.width;j=elem.height;b=Math.ceil(i/(c+e))-1;p=i/2-f/2;q=j-g;E(r,a,b,c,d,e);w=setInterval(z,2);window.document.onkeydown=A}}}